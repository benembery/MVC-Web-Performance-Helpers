/*! Ajax-Include - v0.1.3 - 2014-05-21
* http://filamentgroup.com/lab/ajax_includes_modular_content/
* Copyright (c) 2014 @scottjehl, Filament Group, Inc.; Licensed MIT */
(function(n,t){var i={boundAttr:"data-ajax-bound",interactionAttr:"data-interaction",makeReq:function(t,i){n.get(t,function(n,t,r){i.trigger("ajaxIncludeResponse",[n,r])})},plugins:{}};n.fn.ajaxInclude=function(r){function o(t){var r=t.data("url");u.proxy&&n.inArray(r,f)===-1?(f.push(r),e=e.add(t)):i.makeReq(r,t)}function s(){f.length&&(i.makeReq(u.proxy+f.join(","),e),e=n(),f=[])}function h(n,i){function u(){o(n);s();r.removeListener(u)}var r=t.matchMedia(i);r.addListener&&r.addListener(u)}var f=[],e=n(),u={proxy:null};return typeof r=="string"?u.proxy=r:u=n.extend(u,r),this.not("["+i.boundAttr+"]").not("["+i.interactionAttr+"]").each(function(){for(var r=n(this),s=r.attr("data-media"),l=["append","replace","before","after"],f,e,v=!1,a=r.attr("data-target"),y=l.length,c=0;c<y;c++)r.is("[data-"+l[c]+"]")&&(f=l[c],e=r.attr("data-"+f));e||(e=r.attr("href")||r.attr("action"),v=!0);f==="replace"&&(f+="With");r.data("method",f).data("url",e).data("target",a).attr(i.boundAttr,!0).each(function(){for(var n in i.plugins)i.plugins[n].call(this,u)}).bind("ajaxIncludeResponse",function(t,i){var e=i,h=a?n(a):r,o,s;u.proxy&&(o=new RegExp("<entry url=[\"']?"+r.data("url")+"[\"']?>((?:(?!<\/entry>)(.|\n))*)","gmi").exec(e),e=o?o[1]:"");s=r.triggerHandler("ajaxIncludeFilter",[e]);s&&(e=s);f==="replaceWith"?(r.trigger("ajaxInclude",[e]),h[r.data("method")](e)):(h[r.data("method")](e),r.trigger("ajaxInclude",[e]))});v?i.makeReq(e,r,!0):!s||t.matchMedia&&t.matchMedia(s).matches?o(r):s&&t.matchMedia&&h(r,s)}),s(),this};t.AjaxInclude=i})(jQuery,this);
//# sourceMappingURL=ajaxInclude.min.js.map
